import os
from dotenv import load_dotenv

# Cargar el archivo .env una sola vez al inicio
load_dotenv()

class Settings:
    PROJECT_NAME: str = "AI Invoice Parser"
    VERSION: str = "1.0.0"
    
    # Variables obligatorias (si fallan, la app no arranca)
    DATABASE_URL: str = os.getenv("DATABASE_URL")
    GOOGLE_API_KEY: str = os.getenv("GOOGLE_API_KEY")

    def validate(self):
        """Verifica que las variables críticas existan."""
        if not self.DATABASE_URL:
            raise ValueError("❌ Error Crítico: Falta DATABASE_URL en el archivo .env")
        if not self.GOOGLE_API_KEY:
            raise ValueError("❌ Error Crítico: Falta GOOGLE_API_KEY en el archivo .env")

# Instanciamos la clase para importarla desde otros lados
settings = Settings()
settings.validate()